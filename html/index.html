<!DOCTYPE html>

<html>

<head>
	<meta charset="UTF-8">
	<title>isitmusslanbeertime.com</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
	<style>
		html,
		body {
			background: url("beer.jpg") repeat center center fixed;
			background-size: auto 100%;
		}

		pos {
			position: absolute;
			top: 50%;
			left: 0;
			right: 0;
		}

		curtime {
			position: absolute;
			left: 0;
			right: 0;
			margin: -20vmin 0 0 0;
			text-align: center;
			color: #ffffff;
			text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;
			font-family: "Inconsolata", monospace;
			font-size: 22vmin;
			font-weight: bold;
		}

		nanosecs {
			position: absolute;
			left: 0;
			right: 0;
			text-align: center;
			color: #ffffff;
			text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
			font-family: "Inconsolata", monospace;
			font-size: 4vmin;
			font-weight: bold;
		}
	</style>
</head>

<body>
	<pos>
		<curtime></curtime>
		<nanosecs></nanosecs>
	</pos>

	<script>
		$.ajax({
			method: "GET",
			url: "https://api.isitmusslanbeertime.com/time",
			dataType: "json",
			success: (resp) => {
				$("curtime").html(resp.currentBeerTime.toString());
				start(Math.floor(resp.nanoToBeerTime / 1000000));
			}
		});

		function start(ms) {
			let dur = 137;
			setInterval(() => {
				ms -= dur;
				test = Math.floor(Math.random() * 50) + 75;
				$("nanosecs").html(ms + " ms");
			}, dur);
		}
	</script>
</body>

</html>